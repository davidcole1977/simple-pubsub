module.exports=function(){function publish(topic,params){'undefined'!=typeof subscriptions[topic]&&0!==subscriptions[topic].length&&(params='undefined'!=typeof params?params:null,_.forOwn(subscriptions[topic],function(subscription){subscription.callback(params)}))}function addSubscription(subscription){'undefined'==typeof subscriptions[subscription.topic]&&(subscriptions[subscription.topic]={}),subscriptions[subscription.topic][subscription.id]=subscription}function removeSubscription(subscription){delete subscriptions[subscription.topic][subscription.id]}function Subscription(topic,callback){this.id=_.uniqueId('sub_'),this.topic=topic,this.callback=callback,addSubscription(this)}var _=require('lodash'),subscriptions={};return Subscription.prototype.unsubscribe=function(){removeSubscription(this)},{publish:publish,Subscription:Subscription}}();